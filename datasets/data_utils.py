import numpy as np

DEFAULT_MAX_LEN = 32000

def pad_normal(x, max_len=DEFAULT_MAX_LEN):
    x_len = x.shape[0]
    if x_len >= max_len:
        return x[:max_len]
    # need to pad
    num_repeats = int(max_len / x_len) + 1
    padded_x = np.tile(x, (num_repeats))[:max_len]
    return padded_x


def pad_random(x: np.ndarray, max_len: int = DEFAULT_MAX_LEN):
    x_len = x.shape[0]
    # if duration is already long enough
    if x_len > max_len:
        stt = np.random.randint(x_len - max_len)
        return x[stt : stt + max_len]
    elif x_len == max_len:
        return x

    # if too short
    num_repeats = int(max_len / x_len) + 1
    padded_x = np.tile(x, (num_repeats))[:max_len]
    return padded_x